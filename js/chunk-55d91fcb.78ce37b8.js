(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55d91fcb"],{"0061":function(t,e,n){"use strict";n("01eb")},"01eb":function(t,e,n){},"0246":function(t,e,n){},"0afa":function(t,e,n){},"0db6":function(t,e,n){},1276:function(t,e,n){"use strict";var o=n("2ba4"),i=n("c65b"),a=n("e330"),r=n("d784"),c=n("44e7"),s=n("825a"),l=n("1d80"),u=n("4840"),h=n("8aa5"),f=n("50c4"),m=n("577e"),d=n("dc4a"),p=n("4dae"),v=n("14c3"),b=n("9263"),g=n("9f7f"),y=n("d039"),w=g.UNSUPPORTED_Y,x=4294967295,S=Math.min,C=[].push,O=a(/./.exec),E=a(C),k=a("".slice),$=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(t,e,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var a=m(l(this)),r=void 0===n?x:n>>>0;if(0===r)return[];if(void 0===t)return[a];if(!c(t))return i(e,a,t,r);var s,u,h,f=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=new RegExp(t.source,d+"g");while(s=i(b,g,a)){if(u=g.lastIndex,u>v&&(E(f,k(a,v,s.index)),s.length>1&&s.index<a.length&&o(C,f,p(s,1)),h=s[0].length,v=u,f.length>=r))break;g.lastIndex===s.index&&g.lastIndex++}return v===a.length?!h&&O(g,"")||E(f,""):E(f,k(a,v)),f.length>r?p(f,0,r):f}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(e,this,t,n)}:e,[function(e,n){var o=l(this),r=void 0==e?void 0:d(e,t);return r?i(r,e,o,n):i(a,m(o),e,n)},function(t,o){var i=s(this),r=m(t),c=n(a,i,r,o,a!==e);if(c.done)return c.value;var l=u(i,RegExp),d=i.unicode,p=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(w?"g":"y"),b=new l(w?"^(?:"+i.source+")":i,p),g=void 0===o?x:o>>>0;if(0===g)return[];if(0===r.length)return null===v(b,r)?[r]:[];var y=0,C=0,O=[];while(C<r.length){b.lastIndex=w?0:C;var $,j=v(b,w?k(r,C):r);if(null===j||($=S(f(b.lastIndex+(w?C:0)),r.length))===y)C=h(r,C,d);else{if(E(O,k(r,y,C)),O.length===g)return O;for(var _=1;_<=j.length-1;_++)if(E(O,j[_]),O.length===g)return O;C=y=$}}return E(O,k(r,y)),O}]}),!$,w)},"14c3":function(t,e,n){var o=n("da84"),i=n("c65b"),a=n("825a"),r=n("1626"),c=n("c6b6"),s=n("9263"),l=o.TypeError;t.exports=function(t,e){var n=t.exec;if(r(n)){var o=i(n,t,e);return null!==o&&a(o),o}if("RegExp"===c(t))return i(s,t,e);throw l("RegExp#exec called on incompatible receiver")}},"1bc6":function(t,e,n){},"1dab":function(t,e,n){"use strict";n("9a19")},2187:function(t,e,n){"use strict";n("fd09")},"25f0":function(t,e,n){"use strict";var o=n("e330"),i=n("5e77").PROPER,a=n("6eeb"),r=n("825a"),c=n("3a9b"),s=n("577e"),l=n("d039"),u=n("ad6d"),h="toString",f=RegExp.prototype,m=f[h],d=o(u),p=l((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),v=i&&m.name!=h;(p||v)&&a(RegExp.prototype,h,(function(){var t=r(this),e=s(t.source),n=t.flags,o=s(void 0===n&&c(f,t)&&!("flags"in f)?d(t):n);return"/"+e+"/"+o}),{unsafe:!0})},"2c7d":function(t,e,n){"use strict";n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return P}));var o,i,a=n("5530"),r=n("ade3"),c=n("4360"),s=n("986e"),l=17,u=91,h=86,f=67,m=88,d=89,p=90,v=71,b=66,g=76,y=85,w=83,x=80,S=68,C=46,O=8,E=69,k=[66,67,68,69,71,76,80,83,85,86,88,89,90],$=(o={},Object(r["a"])(o,h,N),Object(r["a"])(o,d,I),Object(r["a"])(o,p,A),Object(r["a"])(o,w,U),Object(r["a"])(o,x,F),Object(r["a"])(o,E,B),o),j=Object(a["a"])(Object(a["a"])({},$),{},Object(r["a"])({},y,Y)),_=Object(a["a"])(Object(a["a"])({},$),{},(i={},Object(r["a"])(i,f,D),Object(r["a"])(i,m,M),Object(r["a"])(i,v,T),Object(r["a"])(i,b,R),Object(r["a"])(i,S,V),Object(r["a"])(i,C,V),Object(r["a"])(i,O,V),Object(r["a"])(i,g,G),i)),L=!1;function P(){window.onkeydown=function(t){if(c["a"].state.isInEdiotr){var e=c["a"].state.curComponent,n=t.keyCode;n===l||n===u?L=!0:n==C||n==O&&e?(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot")):L&&(!_[n]||e&&e.isLock?j[n]&&e&&e.isLock&&(t.preventDefault(),j[n]()):(t.preventDefault(),_[n]()))}},window.onkeyup=function(t){t.keyCode!==l&&t.keyCode!==u||(L=!1)},window.onmousedown=function(){c["a"].commit("setInEditorStatus",!1)}}function D(){c["a"].commit("copy")}function N(){c["a"].commit("paste"),c["a"].commit("recordSnapshot")}function M(){c["a"].commit("cut")}function I(){c["a"].commit("redo")}function A(){c["a"].commit("undo")}function T(){c["a"].state.areaData.components.length&&(c["a"].commit("compose"),c["a"].commit("recordSnapshot"))}function R(){var t=c["a"].state.curComponent;t&&!t.isLock&&"Group"==t.component&&(c["a"].commit("decompose"),c["a"].commit("recordSnapshot"))}function U(){s["a"].$emit("save")}function F(){s["a"].$emit("preview")}function V(){c["a"].state.curComponent&&(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot"))}function B(){s["a"].$emit("clearCanvas")}function G(){c["a"].commit("lock")}function Y(){c["a"].commit("unlock")}},"2ee1":function(t,e,n){"use strict";n("0afa")},"3aac":function(t,e,n){"use strict";n("c87d")},"408a":function(t,e,n){var o=n("e330");t.exports=o(1..valueOf)},4255:function(t,e,n){"use strict";n("c987")},"4a3a":function(t,e,n){"use strict";n("70ef")},"4e72":function(t,e,n){"use strict";n("5359")},5359:function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("e330"),i=n("1d80"),a=n("577e"),r=n("5899"),c=o("".replace),s="["+r+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),h=function(t){return function(e){var n=a(i(e));return 1&t&&(n=c(n,l,"")),2&t&&(n=c(n,u,"")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},"5c43":function(t,e,n){},"5fc1":function(t,e,n){"use strict";n("a9eb")},"622d":function(t,e,n){"use strict";n("7f8d")},6637:function(t,e,n){"use strict";n("0246")},"70ef":function(t,e,n){},"7b60":function(t,e,n){"use strict";n("a08a")},"7e6f":function(t,e,n){"use strict";n("5c43")},"7f8d":function(t,e,n){},"84cc":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var o=n("6547").charAt;t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},"8c51":function(t,e,n){"use strict";n("0db6")},"96cf":function(t,e,n){var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(D){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),r=new _(o||[]);return a._invoke=E(t,n,r),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(D){return{type:"throw",arg:D}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",m="executing",d="completed",p={};function v(){}function b(){}function g(){}var y={};s(y,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==n&&o.call(x,a)&&(y=x);var S=g.prototype=v.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,a,r,c){var s=u(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"===typeof h&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,r,c)}),(function(t){n("throw",t,r,c)})):e.resolve(h).then((function(t){l.value=t,r(l)}),(function(t){return n("throw",t,r,c)}))}c(s.arg)}var i;function a(t,o){function a(){return new e((function(e,i){n(t,o,e,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function E(t,e,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return P()}n.method=i,n.arg=a;while(1){var r=n.delegate;if(r){var c=k(r,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=u(t,e,n);if("normal"===s.type){if(o=n.done?d:f,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function k(t,n){var o=t.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=u(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function L(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){while(++i<t.length)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}return{next:P}}function P(){return{value:e,done:!0}}return b.prototype=g,s(S,"constructor",g),s(g,"constructor",b),b.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},C(O.prototype),s(O.prototype,r,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,o,i,a){void 0===a&&(a=Promise);var r=new O(l(e,n,o,i),a);return t.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},C(S),s(S,c,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=L,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return c.type="throw",c.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],c=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:L(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=o}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},"9a19":function(t,e,n){},a08a:function(t,e,n){},a15b:function(t,e,n){"use strict";var o=n("23e7"),i=n("e330"),a=n("44ad"),r=n("fc6a"),c=n("a640"),s=i([].join),l=a!=Object,u=c("join",",");o({target:"Array",proto:!0,forced:l||!u},{join:function(t){return s(r(this),void 0===t?",":t)}})},a9e3:function(t,e,n){"use strict";var o=n("83ab"),i=n("da84"),a=n("e330"),r=n("94ca"),c=n("6eeb"),s=n("1a2d"),l=n("7156"),u=n("3a9b"),h=n("d9b5"),f=n("c04e"),m=n("d039"),d=n("241c").f,p=n("06cf").f,v=n("9bf2").f,b=n("408a"),g=n("58a8").trim,y="Number",w=i[y],x=w.prototype,S=i.TypeError,C=a("".slice),O=a("".charCodeAt),E=function(t){var e=f(t,"number");return"bigint"==typeof e?e:k(e)},k=function(t){var e,n,o,i,a,r,c,s,l=f(t,"number");if(h(l))throw S("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=g(l),e=O(l,0),43===e||45===e){if(n=O(l,2),88===n||120===n)return NaN}else if(48===e){switch(O(l,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+l}for(a=C(l,2),r=a.length,c=0;c<r;c++)if(s=O(a,c),s<48||s>i)return NaN;return parseInt(a,o)}return+l};if(r(y,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var $,j=function(t){var e=arguments.length<1?0:w(E(t)),n=this;return u(x,n)&&m((function(){b(n)}))?l(Object(e),n,j):e},_=o?d(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;_.length>L;L++)s(w,$=_[L])&&!s(j,$)&&v(j,$,p(w,$));j.prototype=x,x.constructor=j,c(i,y,j)}},a9eb:function(t,e,n){},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");var o=n("06c5");function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(o["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,r=t},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(s)throw r}}}}},bb51:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Toolbar"),n("main",[n("section",{staticClass:"left"},[n("ComponentList"),n("RealTimeComponentList")],1),n("section",{staticClass:"center"},[n("div",{staticClass:"content",on:{drop:t.handleDrop,dragover:t.handleDragOver,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[n("Editor")],1)]),n("section",{staticClass:"right"},[t.curComponent?n("el-tabs",{attrs:{stretch:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"属性",name:"attr"}},[n(t.curComponent.component+"Attr",{tag:"component"})],1),n("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"动画",name:"animation"}},[n("AnimationList")],1),n("el-tab-pane",{staticStyle:{"padding-top":"20px"},attrs:{label:"事件",name:"events"}},[n("EventList")],1)],1):n("CanvasAttr")],1)])],1)},i=[],a=(n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor",class:{edit:t.isEdit},style:Object.assign({},t.getCanvasStyle(t.canvasStyleData),{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}),attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},[n("Grid"),t._l(t.componentData,(function(e,o){return n("Shape",{key:e.id,class:{lock:e.isLock},style:t.getShapeStyle(e.style),attrs:{"default-style":e.style,active:e.id===(t.curComponent||{}).id,element:e,index:o}},[e.component.startsWith("SVG")?n(e.component,{tag:"component",staticClass:"component",style:t.getSVGStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e,request:e.request}}):"VText"!=e.component?n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e,request:e.request}}):n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e,request:e.request},on:{input:t.handleInput}})],1)})),n("ContextMenu"),n("MarkLine"),n("Area",{directives:[{name:"show",rawName:"v-show",value:t.isShowArea,expression:"isShowArea"}],attrs:{start:t.start,width:t.width,height:t.height}})],2)}),r=[],c=(n("caad"),n("2532"),n("ac1f"),n("1276"),n("2f62")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),t._l(t.isActive()?t.getPointList():[],(function(e){return n("div",{key:e,staticClass:"shape-point",style:t.getPointStyle(e),on:{mousedown:function(n){return t.handleMouseDownOnPoint(e,n)}}})})),t._t("default")],2)},l=[],u=n("b85c"),h=n("5530"),f=(n("a9e3"),n("00b4"),n("986e"));function m(t,e,n,o,i,a,r){try{var c=t[a](r),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(o,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){m(a,o,i,r,c,"next",t)}function c(t){m(a,o,i,r,c,"throw",t)}r(void 0)}))}}n("96cf");function p(t){return v.apply(this,arguments)}function v(){return v=d(regeneratorRuntime.mark((function t(e){var n,o,i,a,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:[],o=function(t){return new Promise((function(n){var o=t.animationTime,i=t.value,a=void 0===i?"":i,r=t.isLoop;e.style.setProperty("--time",o+"s"),e.classList.add(a,"animated",b(r));var c=function t(){e.removeEventListener("animationend",t),e.removeEventListener("animationcancel",t),e.classList.remove(a,"animated",b(r)),e.style.removeProperty("--time"),n()};e.addEventListener("animationend",c),e.addEventListener("animationcancel",c)}))},i=0,a=n.length;case 3:if(!(i<a)){t.next=9;break}return t.next=6,o(n[i]);case 6:i++,t.next=3;break;case 9:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function b(t){return t?"infinite":"no-infinite"}var g=n("a2ba"),y={lt:w,t:O,rt:x,r:E,rb:S,b:k,lb:C,l:$};function w(t,e,n,o,i){var a=i.symmetricPoint,r=Object(g["d"])(e,a),c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])(a,r,-t.rotate),l=s.x-c.x,u=s.y-c.y;if(o){l/u>n?(c.x+=Math.abs(l-u*n),l=u*n):(c.y+=Math.abs(u-l/n),u=l/n);var h=Object(g["a"])(c,r,t.rotate);r=Object(g["d"])(h,a),c=Object(g["a"])(h,r,-t.rotate),s=Object(g["a"])(a,r,-t.rotate),l=s.x-c.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function x(t,e,n,o,i){var a=i.symmetricPoint,r=Object(g["d"])(e,a),c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])(a,r,-t.rotate),l=c.x-s.x,u=s.y-c.y;if(o){l/u>n?(c.x-=Math.abs(l-u*n),l=u*n):(c.y+=Math.abs(u-l/n),u=l/n);var h=Object(g["a"])(c,r,t.rotate);r=Object(g["d"])(h,a),c=Object(g["a"])(h,r,-t.rotate),s=Object(g["a"])(a,r,-t.rotate),l=c.x-s.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(s.x),t.top=Math.round(c.y))}function S(t,e,n,o,i){var a=i.symmetricPoint,r=Object(g["d"])(e,a),c=Object(g["a"])(a,r,-t.rotate),s=Object(g["a"])(e,r,-t.rotate),l=s.x-c.x,u=s.y-c.y;if(o){l/u>n?(s.x-=Math.abs(l-u*n),l=u*n):(s.y-=Math.abs(u-l/n),u=l/n);var h=Object(g["a"])(s,r,t.rotate);r=Object(g["d"])(h,a),c=Object(g["a"])(a,r,-t.rotate),s=Object(g["a"])(h,r,-t.rotate),l=s.x-c.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function C(t,e,n,o,i){var a=i.symmetricPoint,r=Object(g["d"])(e,a),c=Object(g["a"])(a,r,-t.rotate),s=Object(g["a"])(e,r,-t.rotate),l=c.x-s.x,u=s.y-c.y;if(o){l/u>n?(s.x+=Math.abs(l-u*n),l=u*n):(s.y-=Math.abs(u-l/n),u=l/n);var h=Object(g["a"])(s,r,t.rotate);r=Object(g["d"])(h,a),c=Object(g["a"])(a,r,-t.rotate),s=Object(g["a"])(h,r,-t.rotate),l=c.x-s.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(s.x),t.top=Math.round(c.y))}function O(t,e,n,o,i){var a=i.symmetricPoint,r=i.curPoint,c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])({x:r.x,y:c.y},r,t.rotate),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),u={x:s.x-(s.x-a.x)/2,y:s.y+(a.y-s.y)/2},h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function E(t,e,n,o,i){var a=i.symmetricPoint,r=i.curPoint,c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])({x:c.x,y:r.y},r,t.rotate),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),u={x:s.x-(s.x-a.x)/2,y:s.y+(a.y-s.y)/2},h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function k(t,e,n,o,i){var a=i.symmetricPoint,r=i.curPoint,c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])({x:r.x,y:c.y},r,t.rotate),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),u={x:s.x-(s.x-a.x)/2,y:s.y+(a.y-s.y)/2},h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function $(t,e,n,o,i){var a=i.symmetricPoint,r=i.curPoint,c=Object(g["a"])(e,r,-t.rotate),s=Object(g["a"])({x:c.x,y:r.y},r,t.rotate),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),u={x:s.x-(s.x-a.x)/2,y:s.y+(a.y-s.y)/2},h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function j(t,e,n,o,i,a){y[t](e,n,o,i,a)}var _=n("fa7d"),L={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object,default:function(){}},defaultStyle:{require:!0,type:Object,default:function(){}},index:{require:!0,type:[Number,String],default:0}},data:function(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:Object(c["b"])(["curComponent","editor"]),mounted:function(){var t=this;this.curComponent&&(this.cursors=this.getCursor()),f["a"].$on("runAnimation",(function(){t.element==t.curComponent&&p(t.$el,t.curComponent.animations)})),f["a"].$on("stopAnimation",(function(){t.$el.classList.remove("animated","infinite")}))},methods:{getPointList:function(){return"line-shape"===this.element.component?this.pointList2:this.pointList},isActive:function(){return this.active&&!this.element.isLock},handleRotate:function(t){var e=this;this.$store.commit("setClickComponentStatus",!0),t.preventDefault(),t.stopPropagation();var n=Object(h["a"])({},this.defaultStyle),o=t.clientY,i=t.clientX,a=n.rotate,r=this.$el.getBoundingClientRect(),c=r.left+r.width/2,s=r.top+r.height/2,l=Math.atan2(o-s,i-c)/(Math.PI/180),u=!1,f=function(t){u=!0;var o=t.clientX,i=t.clientY,r=Math.atan2(i-s,o-c)/(Math.PI/180);n.rotate=a+r-l,e.$store.commit("setShapeStyle",n)},m=function t(){u&&e.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",t),e.cursors=e.getCursor()};document.addEventListener("mousemove",f),document.addEventListener("mouseup",m)},getPointStyle:function(t){var e=this.defaultStyle,n=e.width,o=e.height,i=/t/.test(t),a=/b/.test(t),r=/l/.test(t),c=/r/.test(t),s=0,l=0;2===t.length?(s=r?0:n,l=i?0:o):((i||a)&&(s=n/2,l=i?0:o),(r||c)&&(s=r?0:n,l=Math.floor(o/2)));var u={marginLeft:"-4px",marginTop:"-4px",left:"".concat(s,"px"),top:"".concat(l,"px"),cursor:this.cursors[t]};return u},getCursor:function(){var t=this.angleToCursor,e=this.initialAngle,n=this.pointList,o=this.curComponent,i=Object(g["e"])(o.style.rotate),a={},r=-1;return n.forEach((function(n){var o=Object(g["e"])(e[n]+i),c=t.length;while(1){r=(r+1)%c;var s=t[r];if(o<23||o>=338)return void(a[n]="nw-resize");if(s.start<=o&&o<s.end)return void(a[n]=s.cursor+"-resize")}})),a},handleMouseDownOnShape:function(t){var e=this;if(this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),Object(_["c"])(this.element.component)&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),!this.element.isLock){this.cursors=this.getCursor();var n=Object(h["a"])({},this.defaultStyle),o=t.clientY,i=t.clientX,a=Number(n.top),r=Number(n.left),c=!1,s=function(t){c=!0;var s=t.clientX,l=t.clientY;n.top=l-o+a,n.left=s-i+r,e.$store.commit("setShapeStyle",n),e.$nextTick((function(){f["a"].$emit("move",l-o>0,s-i>0)}))},l=function t(){c&&e.$store.commit("recordSnapshot"),f["a"].$emit("unmove"),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",l)}},selectCurComponent:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu")},handleMouseDownOnPoint:function(t,e){var n=this;this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),e.stopPropagation(),e.preventDefault();var o=Object(h["a"])({},this.defaultStyle),i=o.width/o.height,a={x:o.left+o.width/2,y:o.top+o.height/2},r=this.editor.getBoundingClientRect(),c=e.target.getBoundingClientRect(),s={x:Math.round(c.left-r.left+e.target.offsetWidth/2),y:Math.round(c.top-r.top+e.target.offsetHeight/2)},l={x:a.x-(s.x-a.x),y:a.y-(s.y-a.y)},u=!1,f=!0,m=this.isNeedLockProportion(),d=function(e){if(f)f=!1;else{u=!0;var c={x:e.clientX-Math.round(r.left),y:e.clientY-Math.round(r.top)};j(t,o,c,i,m,{center:a,curPoint:s,symmetricPoint:l}),n.$store.commit("setShapeStyle",o)}},p=function t(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",t),u&&n.$store.commit("recordSnapshot")};document.addEventListener("mousemove",d),document.addEventListener("mouseup",p)},isNeedLockProportion:function(){if("Group"!=this.element.component)return!1;var t,e=[0,90,180,360],n=Object(u["a"])(this.element.propValue);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!e.includes(Object(g["e"])(parseInt(o.style.rotate))))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}}},P=L,D=(n("7b60"),n("2877")),N=Object(D["a"])(P,s,l,!1,null,"424a0ed6",null),M=N.exports,I=n("a7f7"),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[n("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?n("li",{on:{click:t.unlock}},[t._v("解锁")]):[n("li",{on:{click:t.copy}},[t._v("复制")]),n("li",{on:{click:t.paste}},[t._v("粘贴")]),n("li",{on:{click:t.cut}},[t._v("剪切")]),n("li",{on:{click:t.deleteComponent}},[t._v("删除")]),n("li",{on:{click:t.lock}},[t._v("锁定")]),n("li",{on:{click:t.topComponent}},[t._v("置顶")]),n("li",{on:{click:t.bottomComponent}},[t._v("置底")]),n("li",{on:{click:t.upComponent}},[t._v("上移")]),n("li",{on:{click:t.downComponent}},[t._v("下移")])]]:n("li",{on:{click:t.paste}},[t._v("粘贴")])],2)])},T=[],R={data:function(){return{copyData:null}},computed:Object(c["b"])(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},handleMouseUp:function(){this.$store.commit("setClickComponentStatus",!0)},cut:function(){this.$store.commit("cut")},copy:function(){this.$store.commit("copy")},paste:function(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent:function(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent:function(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent:function(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent:function(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent:function(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},U=R,F=(n("8c51"),Object(D["a"])(U,A,T,!1,null,"ff223a58",null)),V=F.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mark-line"},t._l(t.lines,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[e]||!1,expression:"lineStatus[line] || false"}],key:e,ref:e,refInFor:!0,staticClass:"line",class:e.includes("x")?"xline":"yline"})})),0)},G=[],Y=(n("b64b"),{data:function(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:Object(c["b"])(["curComponent","componentData"]),mounted:function(){var t=this;f["a"].$on("move",(function(e,n){t.showLine(e,n)})),f["a"].$on("unmove",(function(){t.hideLine()}))},methods:{hideLine:function(){var t=this;Object.keys(this.lineStatus).forEach((function(e){t.lineStatus[e]=!1}))},showLine:function(t,e){var n=this,o=this.$refs,i=this.componentData,a=Object(I["c"])(this.curComponent.style),r=a.width/2,c=a.height/2;this.hideLine(),i.forEach((function(i){if(i!=n.curComponent){var s=Object(I["c"])(i.style),l=s.top,u=s.left,h=s.bottom,f=s.right,m=s.width/2,d=s.height/2,p={top:[{isNearly:n.isNearly(a.top,l),lineNode:o.xt[0],line:"xt",dragShift:l,lineShift:l},{isNearly:n.isNearly(a.bottom,l),lineNode:o.xt[0],line:"xt",dragShift:l-a.height,lineShift:l},{isNearly:n.isNearly(a.top+c,l+d),lineNode:o.xc[0],line:"xc",dragShift:l+d-c,lineShift:l+d},{isNearly:n.isNearly(a.top,h),lineNode:o.xb[0],line:"xb",dragShift:h,lineShift:h},{isNearly:n.isNearly(a.bottom,h),lineNode:o.xb[0],line:"xb",dragShift:h-a.height,lineShift:h}],left:[{isNearly:n.isNearly(a.left,u),lineNode:o.yl[0],line:"yl",dragShift:u,lineShift:u},{isNearly:n.isNearly(a.right,u),lineNode:o.yl[0],line:"yl",dragShift:u-a.width,lineShift:u},{isNearly:n.isNearly(a.left+r,u+m),lineNode:o.yc[0],line:"yc",dragShift:u+m-r,lineShift:u+m},{isNearly:n.isNearly(a.left,f),lineNode:o.yr[0],line:"yr",dragShift:f,lineShift:f},{isNearly:n.isNearly(a.right,f),lineNode:o.yr[0],line:"yr",dragShift:f-a.width,lineShift:f}]},v=[],b=n.curComponent.style.rotate;Object.keys(p).forEach((function(t){p[t].forEach((function(e){e.isNearly&&(n.$store.commit("setShapeSingleStyle",{key:t,value:0!=b?n.translatecurComponentShift(t,e,a):e.dragShift}),e.lineNode.style[t]="".concat(e.lineShift,"px"),v.push(e.line))}))})),v.length&&n.chooseTheTureLine(v,t,e)}}))},translatecurComponentShift:function(t,e,n){var o=this.curComponent.style,i=o.width,a=o.height;return"top"==t?Math.round(e.dragShift-(a-n.height)/2):Math.round(e.dragShift-(i-n.width)/2)},chooseTheTureLine:function(t,e,n){n?t.includes("yr")?this.lineStatus.yr=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yl")&&(this.lineStatus.yl=!0):t.includes("yl")?this.lineStatus.yl=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yr")&&(this.lineStatus.yr=!0),e?t.includes("xb")?this.lineStatus.xb=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xt")&&(this.lineStatus.xt=!0):t.includes("xt")?this.lineStatus.xt=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xb")&&(this.lineStatus.xb=!0)},isNearly:function(t,e){return Math.abs(t-e)<=this.diff}}}),X=Y,z=(n("4e72"),Object(D["a"])(X,B,G,!1,null,"475239c0",null)),q=z.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},W=[],J={props:{start:{type:Object,default:function(){}},width:{type:Number,default:0},height:{type:Number,default:0}}},K=J,Q=(n("7e6f"),Object(D["a"])(K,H,W,!1,null,"30e7b1c2",null)),Z=Q.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[n("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),n("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),n("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),n("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},et=[],nt=(n("5fc1"),{}),ot=Object(D["a"])(nt,tt,et,!1,null,"39ef9482",null),it=ot.exports,at={components:{Shape:M,ContextMenu:V,MarkLine:q,Area:Z,Grid:it},props:{isEdit:{type:Boolean,default:!0}},data:function(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:Object(c["b"])(["componentData","curComponent","canvasStyleData","editor"]),mounted:function(){var t=this;this.$store.commit("getEditor"),f["a"].$on("hideArea",(function(){t.hideArea()}))},methods:{getShapeStyle:I["e"],getCanvasStyle:I["b"],changeStyleWithScale:g["b"],handleMouseDown:function(t){var e=this;this.curComponent&&!Object(_["c"])(this.curComponent.component)||t.preventDefault(),this.hideArea();var n=this.editor.getBoundingClientRect();this.editorX=n.x,this.editorY=n.y;var o=t.clientX,i=t.clientY;this.start.x=o-this.editorX,this.start.y=i-this.editorY,this.isShowArea=!0;var a=function(t){e.width=Math.abs(t.clientX-o),e.height=Math.abs(t.clientY-i),t.clientX<o&&(e.start.x=t.clientX-e.editorX),t.clientY<i&&(e.start.y=t.clientY-e.editorY)},r=function t(n){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t),n.clientX!=o||n.clientY!=i?e.createGroup():e.hideArea()};document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)},hideArea:function(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup:function(){var t=this,e=this.getSelectArea();if(e.length<=1)this.hideArea();else{var n=1/0,o=1/0,i=-1/0,a=-1/0;e.forEach((function(e){var r={};"Group"==e.component?e.propValue.forEach((function(e){var c=Object(_["a"])("#component".concat(e.id)).getBoundingClientRect();r.left=c.left-t.editorX,r.top=c.top-t.editorY,r.right=c.right-t.editorX,r.bottom=c.bottom-t.editorY,r.left<o&&(o=r.left),r.top<n&&(n=r.top),r.right>i&&(i=r.right),r.bottom>a&&(a=r.bottom)})):r=Object(I["c"])(e.style),r.left<o&&(o=r.left),r.top<n&&(n=r.top),r.right>i&&(i=r.right),r.bottom>a&&(a=r.bottom)})),this.start.x=o,this.start.y=n,this.width=i-o,this.height=a-n,this.$store.commit("setAreaData",{style:{left:o,top:n,width:this.width,height:this.height},components:e})}},getSelectArea:function(){var t=this,e=[],n=this.start,o=n.x,i=n.y;return this.componentData.forEach((function(n){if(!n.isLock){var a=Object(I["c"])(n.style),r=a.left,c=a.top,s=a.width,l=a.height;o<=r&&i<=c&&r+s<=o+t.width&&c+l<=i+t.height&&e.push(n)}})),e},handleContextMenu:function(t){t.stopPropagation(),t.preventDefault();var e=t.target,n=t.offsetY,o=t.offsetX;while(e instanceof SVGElement)e=e.parentNode;while(!e.className.includes("editor"))o+=e.offsetLeft,n+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getComponentStyle:function(t){return Object(I["f"])(t,this.svgFilterAttrs)},getSVGStyle:function(t){return Object(I["d"])(t,this.svgFilterAttrs)},handleInput:function(t,e){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(t,e)})},getTextareaHeight:function(t,e){var n=t.style,o=n.lineHeight,i=n.fontSize,a=n.height;""===o&&(o=1.5);var r=(e.split("<br>").length-1)*o*(i||this.canvasStyleData.fontSize);return a>r?a:r}}},rt=at,ct=(n("4255"),Object(D["a"])(rt,a,r,!1,null,"4409b43e",null)),st=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(t,e){return n("div",{key:e,staticClass:"list",attrs:{draggable:"","data-index":e}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.label,placement:"top-start"}},["el"!=t.icon.substr(0,2)?n("span",{staticClass:"iconfont",class:"icon-"+t.icon}):n("span",{class:t.icon})])],1)})),0)},ut=[],ht=n("4e67"),ft={data:function(){return{componentList:ht["c"]}},methods:{handleDragStart:function(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},mt=ft,dt=(n("1dab"),Object(D["a"])(mt,lt,ut,!1,null,"6a16cfd6",null)),pt=dt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animation-list"},[n("div",{staticClass:"div-animation"},[n("el-button",{on:{click:function(e){t.isShowAnimation=!0}}},[t._v("添加动画")]),n("el-button",{on:{click:t.previewAnimate}},[t._v("预览动画")]),n("div",t._l(t.curComponent.animations,(function(e,o){return n("el-tag",{key:o,attrs:{closable:""},on:{close:function(e){return t.removeAnimation(o)}}},[t._v(" "+t._s(e.label)+" "),n("i",{staticClass:"cursor el-icon-setting",on:{click:function(e){return t.handleAnimationSetting(o)}}})])})),1)],1),n("Modal",{model:{value:t.isShowAnimation,callback:function(e){t.isShowAnimation=e},expression:"isShowAnimation"}},[n("el-tabs",{attrs:{stretch:""},model:{value:t.animationActiveName,callback:function(e){t.animationActiveName=e},expression:"animationActiveName"}},t._l(t.animationClassData,(function(e){return n("el-tab-pane",{key:e.label,staticStyle:{"margin-top":"20px"},attrs:{label:e.label,name:e.label}},[n("el-scrollbar",{staticClass:"animate-container"},t._l(e.children,(function(e){return n("div",{key:e.value,ref:e.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(n){return t.runAnimation(e)},click:function(n){return t.addAnimation(e)}}},[n("div",[t._v(" "+t._s(e.label)+" ")])])})),0)],1)})),1)],1),t.isShowAnimationSetting?n("AnimationSettingModal",{attrs:{"cur-index":t.curIndex},on:{close:function(e){t.isShowAnimationSetting=!1}}}):t._e()],1)},bt=[],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"modal-bg",on:{click:t.hide}},[n("div",{staticClass:"fadeInLeft animated modal",on:{click:t.stopPropagation}},[t._t("default")],2)]):t._e()},yt=[],wt={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide:function(){this.$emit("change")},stopPropagation:function(t){t.stopPropagation()}}},xt=wt,St=(n("4a3a"),Object(D["a"])(xt,gt,yt,!1,null,"2eb791b6",null)),Ct=St.exports,Ot=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];Ot.forEach((function(t){t.children.forEach((function(t){t.pending=!1,t.animationTime=1}))}));var Et=Ot,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.config.label+" 动画配置",visible:t.centerDialogVisible,width:"30%",center:""},on:{close:t.handleCloseModal}},[n("div",{staticClass:"time"},[t._v(" 动画时长："),n("el-input-number",{attrs:{"controls-position":"right",min:.1,precision:2,step:.01},model:{value:t.config.animationTime,callback:function(e){t.$set(t.config,"animationTime",e)},expression:"config.animationTime"}})],1),n("div",{staticClass:"loop"},[t._v(" 是否循环："),n("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:t.isDisabled},model:{value:t.config.isLoop,callback:function(e){t.$set(t.config,"isLoop",e)},expression:"config.isLoop"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handleCloseModal}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveSetting}},[t._v("确 定")])],1)])},$t=[],jt={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data:function(){return{centerDialogVisible:!0,config:{}}},computed:Object(h["a"])(Object(h["a"])({},Object(c["b"])(["curComponent"])),{},{isDisabled:function(){return this.curComponent.animations.length>1}}),created:function(){var t=this.curComponent.animations[this.curIndex]||{},e=t.label,n=t.animationTime,o=t.isLoop,i=void 0!==o&&o,a=t.value;this.config={animationTime:n,label:e,isLoop:i,value:a}},methods:{handleCloseModal:function(){this.$emit("close")},handleSaveSetting:function(){var t=this.config.isLoop;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:t}}),f["a"].$emit("stopAnimation"),this.handleCloseModal()}}},_t=jt,Lt=(n("6637"),Object(D["a"])(_t,kt,$t,!1,null,"043aa3fa",null)),Pt=Lt.exports,Dt={components:{Modal:Ct,AnimationSettingModal:Pt},data:function(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:Et,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:Object(c["b"])(["curComponent"]),methods:{addAnimation:function(t){this.$store.commit("addAnimation",t),this.isShowAnimation=!1},previewAnimate:function(){f["a"].$emit("runAnimation")},removeAnimation:function(t){this.$store.commit("removeAnimation",t),this.curComponent.animations.length||f["a"].$emit("stopAnimation")},handleAnimationSetting:function(t){this.isShowAnimationSetting=!0,this.curIndex=t},runAnimation:function(t){var e=this;return d(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.pending){n.next=2;break}return n.abrupt("return");case 2:return t.pending=!0,n.next=5,p(e.$refs[t.value][0],[t]);case 5:setTimeout((function(){t.pending=!1}),100);case 6:case"end":return n.stop()}}),n)})))()}}},Nt=Dt,Mt=(n("e285"),Object(D["a"])(Nt,vt,bt,!1,null,null,null)),It=Mt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-list"},[n("div",{staticClass:"div-events"},[n("el-button",{on:{click:function(e){t.isShowEvent=!0}}},[t._v("添加事件")]),n("div",t._l(Object.keys(t.curComponent.events),(function(e){return n("el-tag",{key:e,attrs:{closable:""},on:{close:function(n){return t.removeEvent(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),n("Modal",{model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}},[n("el-tabs",{attrs:{stretch:""},model:{value:t.eventActiveName,callback:function(e){t.eventActiveName=e},expression:"eventActiveName"}},t._l(t.eventList,(function(e){return n("el-tab-pane",{key:e.key,staticStyle:{padding:"0 20px"},attrs:{label:e.label,name:e.key}},["redirect"===e.key?n("Redirect",{attrs:{event:e.key},model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}}):t._e(),"alert"===e.key?n("Alert",{attrs:{event:e.key},model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}}):t._e(),"warn"===e.key?n("Warn",{attrs:{event:e.key},model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}}):t._e(),"Notification"===e.key?n("Notification",{attrs:{event:e.key},model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}}):t._e()],1)})),1)],1)],1)},Tt=[],Rt=(n("25f0"),n("5c96")),Ut={redirect:function(t){t.url&&(window.location.href=t.url)},alert:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){t.content&&alert(t.content)})),warn:function(t){Object(Rt["Message"])({message:t.content,type:t.type})},Notification:function(t){Object(Rt["Notification"])({message:t.content,title:t.title,type:t.type,position:t.position})}},Ft={methods:Ut},Vt=[{key:"redirect",label:"跳转事件",event:Ut.redirect,param:""},{key:"alert",label:"alert 事件",event:Ut.alert,param:""},{key:"warn",label:"提醒",event:Ut.warn,param:""},{key:"Notification",label:"通知",event:Ut.Notification,param:""}],Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"跳转链接"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.param.url,callback:function(e){t.$set(t.param,"url",e)},expression:"param.url"}})],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addEvent(t.event)}}},[t._v("确定")])],1)],1)],1)},Gt=[],Yt={model:{prop:"show",event:"close"},props:{show:{type:Boolean,default:!1},event:{type:String}},data:function(){return{param:{url:"https://juejin.cn/"}}},methods:{addEvent:function(t){this.isShowEvent=!1,this.$emit("close");var e=this.param;this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},Xt=Yt,zt=Object(D["a"])(Xt,Bt,Gt,!1,null,null,null),qt=zt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"消息图标"}},[n("el-select",{attrs:{placeholder:"请选择图标"},model:{value:t.param.type,callback:function(e){t.$set(t.param,"type",e)},expression:"param.type"}},t._l(t.types,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"消息内容"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 message 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.param.content,callback:function(e){t.$set(t.param,"content",e)},expression:"param.content"}})],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addEvent(t.event)}}},[t._v("确定")])],1)],1)],1)},Wt=[],Jt={model:{prop:"show",event:"close"},props:{show:{type:Boolean,default:!1},event:{type:String}},data:function(){return{param:{content:"",type:""},types:[{label:"成功",value:"success"},{label:"错误",value:"error"},{label:"警告",value:"warn"},{label:"消息",value:"info"}]}},methods:{addEvent:function(t){this.isShowEvent=!1,this.$emit("close");var e=this.param;this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},Kt=Jt,Qt=Object(D["a"])(Kt,Ht,Wt,!1,null,null,null),Zt=Qt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"alert内容"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.param.content,callback:function(e){t.$set(t.param,"content",e)},expression:"param.content"}})],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addEvent(t.event)}}},[t._v("确定")])],1)],1)],1)},ee=[],ne={model:{prop:"show",event:"close"},props:{show:{type:Boolean,default:!1},event:{type:String}},data:function(){return{param:{content:""}}},methods:{addEvent:function(t){console.log(t,this.param),this.isShowEvent=!1,this.$emit("close");var e=this.param;this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},oe=ne,ie=Object(D["a"])(oe,te,ee,!1,null,null,null),ae=ie.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"弹出位置"}},[n("el-select",{attrs:{placeholder:"请选择弹出位置"},model:{value:t.param.position,callback:function(e){t.$set(t.param,"position",e)},expression:"param.position"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"通知图标"}},[n("el-select",{attrs:{placeholder:"请选择图标"},model:{value:t.param.type,callback:function(e){t.$set(t.param,"type",e)},expression:"param.type"}},t._l(t.types,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"通知标题"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 通知 的标题"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.param.title,callback:function(e){t.$set(t.param,"title",e)},expression:"param.title"}})],1),n("el-form-item",{attrs:{label:"通知内容"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 通知 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.param.content,callback:function(e){t.$set(t.param,"content",e)},expression:"param.content"}})],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addEvent(t.event)}}},[t._v("确定")])],1)],1)],1)},ce=[],se={model:{prop:"show",event:"close"},props:{show:{type:Boolean,default:!1},event:{type:String}},data:function(){return{options:[{value:"top-right",label:"右上角"},{value:"bottom-right",label:"右下角"},{value:"top-left",label:"左上角"},{value:"bottom-left",label:"左下角"}],types:[{label:"成功",value:"success"},{label:"错误",value:"error"},{label:"警告",value:"warn"},{label:"消息",value:"info"}],param:{position:"top-right",title:"",content:"",type:""}}},methods:{addEvent:function(t){this.isShowEvent=!1,this.$emit("close");var e=this.param;this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},le=se,ue=Object(D["a"])(le,re,ce,!1,null,null,null),he=ue.exports,fe={components:{Modal:Ct,Notification:he,Warn:Zt,Alert:ae,Redirect:qt},data:function(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:Vt}},computed:Object(c["b"])(["curComponent"]),methods:{addEvent:function(t,e){this.isShowEvent=!1,this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},me=fe,de=(n("c4e4"),Object(D["a"])(me,At,Tt,!1,null,"c88de236",null)),pe=de.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolbar"},[n("el-button",{on:{click:t.undo}},[t._v("撤消")]),n("el-button",{on:{click:t.redo}},[t._v("重做")]),n("label",{staticClass:"insert",attrs:{for:"input"}},[t._v("插入图片")]),n("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:t.handleFileChange}}),n("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.preview(!1)}}},[t._v("预览")]),n("el-button",{on:{click:t.save}},[t._v("保存")]),n("el-button",{on:{click:t.clearCanvas}},[t._v("清空画布")]),n("el-button",{attrs:{disabled:!t.areaData.components.length},on:{click:t.compose}},[t._v("组合")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock||"Group"!=t.curComponent.component},on:{click:t.decompose}},[t._v(" 拆分 ")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock},on:{click:t.lock}},[t._v("锁定")]),n("el-button",{attrs:{disabled:!t.curComponent||!t.curComponent.isLock},on:{click:t.unlock}},[t._v("解锁")]),n("el-button",{on:{click:function(e){return t.preview(!0)}}},[t._v("截图")]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布大小")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"width",e.target.value)}}}),n("span",[t._v("*")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"height",e.target.value)}}})]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布比例")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],staticStyle:{"margin-left":"5px"},domProps:{value:t.scale},on:{input:[function(e){e.target.composing||(t.scale=e.target.value)},t.handleScaleChange]}}),t._v(" % ")]),n("el-popover",{attrs:{placement:"bottom-start",width:"200",trigger:"hover"}},[n("ul",[n("li",[t._v("ctrl / command + c : 复制 ")]),n("br"),n("li",[t._v("ctrl / command + v : 粘贴 ")]),n("br"),n("li",[t._v("ctrl / command + x : 剪切 ")]),n("br"),n("li",[t._v("ctrl / command + y : 重做 ")]),n("br"),n("li",[t._v("ctrl / command + z : 撤销 ")]),n("br"),n("li",[t._v("ctrl / command + s : 保存 ")]),n("br"),n("li",[t._v("ctrl / command + g : 组合 ")]),n("br"),n("li",[t._v("ctrl / command + b : 拆分 ")]),n("br"),n("li",[t._v("ctrl / command + l : 锁定 ")]),n("br"),n("li",[t._v("ctrl / command + u : 解锁 ")]),n("br"),n("li",[t._v("ctrl / command + p : 预览 ")]),n("br"),n("li",[t._v("ctrl / command + d : 删除 ")]),n("br"),n("li",[t._v("ctrl / command + e : 清空 ")]),n("br"),n("li",[t._v("Backspace : 撤销 ")]),n("br"),n("li",[t._v("Delete : 撤销 ")])]),n("div",{staticClass:"shortcut",attrs:{slot:"reference"},slot:"reference"},[n("span",{staticClass:"el-icon-question"}),n("span",[t._v("快捷键")])])])],1),n("Preview",{attrs:{"is-screenshot":t.isScreenshot},on:{change:t.handlePreviewChange},model:{value:t.isShowPreview,callback:function(e){t.isShowPreview=e},expression:"isShowPreview"}})],1)},be=[],ge=(n("e9c4"),n("ac24")),ye=n("eae4"),we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{ref:"container",staticClass:"bg"},[t.isScreenshot?n("el-button",{staticClass:"close",on:{click:t.htmlToImage}},[t._v("确定")]):n("el-button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]),n("el-button",{ref:"send_btn",staticClass:"send",on:{click:t.exportHTML}},[t._v("发布")]),n("a",{ref:"send_link",staticStyle:{display:"none"}}),n("div",{staticClass:"canvas-container"},[n("div",{staticClass:"canvas",style:Object.assign({},t.getCanvasStyle(t.canvasStyleData),{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"})},t._l(t.componentData,(function(t,e){return n("ComponentWrapper",{key:e,attrs:{config:t}})})),1)])],1):t._e()},xe=[],Se=(n("a15b"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.onClick,mouseenter:t.onMouseEnter}},[t.config.component.startsWith("SVG")?n(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request}}):n(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}})],1)}),Ce=[],Oe={mixins:[Ft],props:{config:{type:Object,required:!0,default:function(){}}},mounted:function(){p(this.$refs.component.$el,this.config.animations)},methods:{getStyle:I["f"],getSVGStyle:I["d"],onClick:function(){var t=this,e=this.config.events;Object.keys(e).forEach((function(n){t[n](e[n])})),f["a"].$emit("v-click",this.config.id)},onMouseEnter:function(){f["a"].$emit("v-hover",this.config.id)}}},Ee=Oe,ke=(n("622d"),Object(D["a"])(Ee,Se,Ce,!1,null,"09199fd4",null)),$e=ke.exports,je=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};const _e="application/font-woff",Le="image/jpeg",Pe={woff:_e,woff2:_e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Le,jpeg:Le,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function De(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Ne(t){const e=De(t).toLowerCase();return Pe[e]||""}function Me(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),e&&(o.href=e),i.href=t,i.href}function Ie(t){return-1!==t.search(/^(data:)/)}function Ae(t,e){return`data:${e};base64,${t}`}function Te(t){return t.split(/,/)[1]}const Re=function(){let t=0;const e=()=>("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return()=>(t+=1,`u${e()}${t}`)}();function Ue(t){const e=[];for(let n=0,o=t.length;n<o;n+=1)e.push(t[n]);return e}function Fe(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function Ve(t){const e=Fe(t,"border-left-width"),n=Fe(t,"border-right-width");return t.clientWidth+e+n}function Be(t){const e=Fe(t,"border-top-width"),n=Fe(t,"border-bottom-width");return t.clientHeight+e+n}function Ge(){let t,e;try{e=process}catch(o){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function Ye(t){return new Promise((e,n)=>{const o=new Image;o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="sync",o.src=t})}function Xe(t){return je(this,void 0,void 0,(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(t)).then(encodeURIComponent).then(t=>"data:image/svg+xml;charset=utf-8,"+t)}))}function ze(t,e,n){return je(this,void 0,void 0,(function*(){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return i.setAttribute("width",""+e),i.setAttribute("height",""+n),i.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(t),Xe(i)}))}const qe={};function He(t){let e=t.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(e)&&(e=e.replace(/.*\//,"")),e}function We(t,e){const n=He(t);if(null!=qe[n])return qe[n];e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());const o=n=>{let o="";if(e.imagePlaceholder){const t=e.imagePlaceholder.split(/,/);t&&t[1]&&(o=t[1])}let i="Failed to fetch resource: "+t;return n&&(i="string"===typeof n?n:n.message),i&&console.error(i),{blob:o,contentType:""}},i=window.fetch(t).then(t=>t.blob().then(e=>({blob:e,contentType:t.headers.get("Content-Type")||""}))).then(({blob:t,contentType:e})=>new Promise((n,o)=>{const i=new FileReader;i.onloadend=()=>n({contentType:e,blob:i.result}),i.onerror=o,i.readAsDataURL(t)})).then(({blob:t,contentType:e})=>({contentType:e,blob:Te(t)})).catch(o);return qe[n]=i,i}function Je(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Ke(t){return Ue(t).map(e=>{const n=t.getPropertyValue(e),o=t.getPropertyPriority(e);return`${e}: ${n}${o?" !important":""};`}).join(" ")}function Qe(t,e,n){const o=`.${t}:${e}`,i=n.cssText?Je(n):Ke(n);return document.createTextNode(`${o}{${i}}`)}function Ze(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const a=Re();try{e.className=`${e.className} ${a}`}catch(c){return}const r=document.createElement("style");r.appendChild(Qe(a,n,o)),e.appendChild(r)}function tn(t,e){Ze(t,e,":before"),Ze(t,e,":after")}var en=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};function nn(t){return en(this,void 0,void 0,(function*(){const e=t.toDataURL();return"data:,"===e?Promise.resolve(t.cloneNode(!1)):Ye(e)}))}function on(t,e){return en(this,void 0,void 0,(function*(){return Promise.resolve(t.poster).then(t=>We(t,e)).then(e=>Ae(e.blob,Ne(t.poster)||e.contentType)).then(t=>Ye(t))}))}function an(t,e){return en(this,void 0,void 0,(function*(){return t instanceof HTMLCanvasElement?nn(t):t instanceof HTMLVideoElement&&t.poster?on(t,e):Promise.resolve(t.cloneNode(!1))}))}const rn=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function cn(t,e,n){var o;return en(this,void 0,void 0,(function*(){const i=rn(t)&&t.assignedNodes?Ue(t.assignedNodes()):Ue((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes);return 0===i.length||t instanceof HTMLVideoElement?Promise.resolve(e):i.reduce((t,o)=>t.then(()=>hn(o,n)).then(t=>{t&&e.appendChild(t)}),Promise.resolve()).then(()=>e)}))}function sn(t,e){const n=window.getComputedStyle(t),o=e.style;o&&(n.cssText?o.cssText=n.cssText:Ue(n).forEach(t=>{o.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}))}function ln(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function un(t,e){return en(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve().then(()=>sn(t,e)).then(()=>tn(t,e)).then(()=>ln(t,e)).then(()=>e):Promise.resolve(e)}))}function hn(t,e,n){return en(this,void 0,void 0,(function*(){return n||!e.filter||e.filter(t)?Promise.resolve(t).then(t=>an(t,e)).then(n=>cn(t,n,e)).then(e=>un(t,e)):Promise.resolve(null)}))}var fn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};const mn=/url\((['"]?)([^'"]+?)\1\)/g,dn=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,pn=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function vn(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function bn(t){const e=[];return t.replace(mn,(t,n,o)=>(e.push(o),t)),e.filter(t=>!Ie(t))}function gn(t,e,n,o,i){const a=n?Me(e,n):e;return Promise.resolve(a).then(t=>i?i(t):We(t,o)).then(t=>"string"===typeof t?Ae(t,Ne(e)):Ae(t.blob,Ne(e)||t.contentType)).then(n=>t.replace(vn(e),`$1${n}$3`)).then(t=>t,()=>a)}function yn(t,{preferredFontFormat:e}){return e?t.replace(pn,t=>{while(1){const[n,,o]=dn.exec(t)||[];if(!o)return"";if(o===e)return`src: ${n};`}}):t}function wn(t){return-1!==t.search(mn)}function xn(t,e,n){return fn(this,void 0,void 0,(function*(){if(!wn(t))return Promise.resolve(t);const o=yn(t,n);return Promise.resolve(o).then(bn).then(t=>t.reduce((t,o)=>t.then(t=>gn(t,o,e,n)),Promise.resolve(o)))}))}var Sn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};function Cn(t,e){var n;return Sn(this,void 0,void 0,(function*(){const o=null===(n=t.style)||void 0===n?void 0:n.getPropertyValue("background");return o?Promise.resolve(o).then(t=>xn(t,null,e)).then(e=>(t.style.setProperty("background",e,t.style.getPropertyPriority("background")),t)):Promise.resolve(t)}))}function On(t,e){return Sn(this,void 0,void 0,(function*(){if((!(t instanceof HTMLImageElement)||Ie(t.src))&&(!(t instanceof SVGImageElement)||Ie(t.href.baseVal)))return Promise.resolve(t);const n=t instanceof HTMLImageElement?t.src:t.href.baseVal;return Promise.resolve(n).then(t=>We(t,e)).then(t=>Ae(t.blob,Ne(n)||t.contentType)).then(e=>new Promise((n,o)=>{t.onload=n,t.onerror=o,t instanceof HTMLImageElement?(t.srcset="",t.src=e):t.href.baseVal=e})).then(()=>t,()=>t)}))}function En(t,e){return Sn(this,void 0,void 0,(function*(){const n=Ue(t.childNodes),o=n.map(t=>kn(t,e));return Promise.all(o).then(()=>t)}))}function kn(t,e){return Sn(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve(t).then(t=>Cn(t,e)).then(t=>On(t,e)).then(t=>En(t,e)):Promise.resolve(t)}))}function $n(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=e.width+"px"),e.height&&(n.height=e.height+"px");const o=e.style;return null!=o&&Object.keys(o).forEach(t=>{n[t]=o[t]}),t}var jn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};const _n={};function Ln(t){const e=_n[t];if(null!=e)return e;const n=window.fetch(t).then(e=>({url:t,cssText:e.text()}));return _n[t]=n,n}function Pn(t){return jn(this,void 0,void 0,(function*(){return t.cssText.then(e=>{let n=e;const o=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],a=i.map(e=>{let i=e.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),window.fetch(i).then(t=>t.blob()).then(t=>new Promise((o,i)=>{const a=new FileReader;a.onloadend=()=>{n=n.replace(e,`url(${a.result})`),o([e,a.result])},a.onerror=i,a.readAsDataURL(t)}))});return Promise.all(a).then(()=>n)})}))}function Dn(t){if(null==t)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const t=i.exec(o);if(null===t)break;e.push(t[0])}o=o.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,r="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(r,"gi");while(1){let t=a.exec(o);if(null===t){if(t=c.exec(o),null===t)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(t[0])}return e}function Nn(t){return jn(this,void 0,void 0,(function*(){const e=[],n=[];return t.forEach(e=>{if("cssRules"in e)try{Ue(e.cssRules).forEach((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let i=o+1;const a=t.href,r=Ln(a).then(t=>t?Pn(t):"").then(t=>Dn(t).forEach(t=>{try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:t,error:n})}})).catch(t=>{console.error("Error loading remote css",t.toString())});n.push(r)}})}catch(o){const i=t.find(t=>null==t.href)||document.styleSheets[0];null!=e.href&&n.push(Ln(e.href).then(t=>t?Pn(t):"").then(t=>Dn(t).forEach(t=>{i.insertRule(t,e.cssRules.length)})).catch(t=>{console.error("Error loading remote stylesheet",t.toString())})),console.error("Error inlining remote css file",o.toString())}}),Promise.all(n).then(()=>(t.forEach(t=>{if("cssRules"in t)try{Ue(t.cssRules).forEach(t=>{e.push(t)})}catch(n){console.error("Error while reading CSS rules from "+t.href,n.toString())}}),e))}))}function Mn(t){return t.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>wn(t.style.getPropertyValue("src")))}function In(t){return jn(this,void 0,void 0,(function*(){return new Promise((e,n)=>{null==t.ownerDocument&&n(new Error("Provided element is not within a Document")),e(Ue(t.ownerDocument.styleSheets))}).then(t=>Nn(t)).then(Mn)}))}function An(t,e){return jn(this,void 0,void 0,(function*(){return In(t).then(t=>Promise.all(t.map(t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return xn(t.cssText,n,e)}))).then(t=>t.join("\n"))}))}function Tn(t,e){return jn(this,void 0,void 0,(function*(){return(null!=e.fontEmbedCSS?Promise.resolve(e.fontEmbedCSS):An(t,e)).then(e=>{const n=document.createElement("style"),o=document.createTextNode(e);return n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),t})}))}var Rn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o["throw"](t))}catch(e){a(e)}}function s(t){t.done?n(t.value):i(t.value).then(r,c)}s((o=o.apply(t,e||[])).next())}))};function Un(t,e={}){const n=e.width||Ve(t),o=e.height||Be(t);return{width:n,height:o}}function Fn(t,e={}){return Rn(this,void 0,void 0,(function*(){const{width:n,height:o}=Un(t,e);return Promise.resolve(t).then(t=>hn(t,e,!0)).then(t=>Tn(t,e)).then(t=>kn(t,e)).then(t=>$n(t,e)).then(t=>ze(t,n,o))}))}const Vn=16384;function Bn(t){(t.width>Vn||t.height>Vn)&&(t.width>Vn&&t.height>Vn?t.width>t.height?(t.height*=Vn/t.width,t.width=Vn):(t.width*=Vn/t.height,t.height=Vn):t.width>Vn?(t.height*=Vn/t.width,t.width=Vn):(t.width*=Vn/t.height,t.height=Vn))}function Gn(t,e={}){return Rn(this,void 0,void 0,(function*(){return Fn(t,e).then(Ye).then(n=>{const o=document.createElement("canvas"),i=o.getContext("2d"),a=e.pixelRatio||Ge(),{width:r,height:c}=Un(t,e),s=e.canvasWidth||r,l=e.canvasHeight||c;return o.width=s*a,o.height=l*a,e.skipAutoScale||Bn(o),o.style.width=""+s,o.style.height=""+l,e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(n,0,0,o.width,o.height),o})}))}function Yn(t,e={}){return Rn(this,void 0,void 0,(function*(){return Gn(t,e).then(t=>t.toDataURL())}))}var Xn={components:{ComponentWrapper:$e},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},isScreenshot:{type:Boolean,default:!1}},computed:Object(c["b"])(["componentData","canvasStyleData"]),methods:{getStyle:I["f"],getCanvasStyle:I["b"],changeStyleWithScale:g["b"],close:function(){this.$emit("change",!1)},htmlToImage:function(){Yn(this.$refs.container.querySelector(".canvas")).then((function(t){var e=document.createElement("a");e.setAttribute("download","screenshot"),e.href=t,e.click()})).catch((function(t){console.error("oops, something went wrong!",t)})).finally(this.close)},getDom:function(){var t=["<!doctype html>","<html>","<head>",window.document.head.innerHTML,"</head>","<body>",this.$refs.container.querySelector(".canvas").innerHTML,"</body>","</html>"];return t.join("")},exportHTML:function(){var t=this;if(this.componentData.length<=0)return alert("发布需要有内容！");this.$confirm("确认发布","提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}).then((function(e){if("confirm"==e){var n=t.$refs.send_link,o=URL.createObjectURL(new Blob([t.getDom()],{type:'text/plain;charset="utf-8"'}));n.href=o,n.download="Publish.html",n.click(),window.URL.revokeObjectURL(o)}})).catch((function(t){return t}))}}},zn=Xn,qn=(n("2ee1"),Object(D["a"])(zn,we,xe,!1,null,"d050e1dc",null)),Hn=qn.exports,Wn=n("7909"),Jn={components:{Preview:Hn},data:function(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize"],scale:"100%",timer:null,isScreenshot:!1}},computed:Object(c["b"])(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created:function(){f["a"].$on("preview",this.preview),f["a"].$on("save",this.save),f["a"].$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format:function(t){return Object(Wn["b"])(t,Object(Wn["a"])(parseFloat(this.scale),100))},getOriginStyle:function(t){return Object(Wn["a"])(t,Object(Wn["a"])(parseFloat(this.canvasStyleData.scale),100))},handleScaleChange:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.scale=~~t.scale||1;var e=Object(_["b"])(t.componentData);e.forEach((function(e){Object.keys(e.style).forEach((function(n){if(t.needToChange.includes(n)){if("fontSize"===n&&""===e.style[n])return;e.style[n]=t.format(t.getOriginStyle(e.style[n]))}}))})),t.$store.commit("setComponentData",e),t.$store.commit("setCurComponent",{component:e[t.curComponentIndex],index:t.curComponentIndex}),t.$store.commit("setCanvasStyle",Object(h["a"])(Object(h["a"])({},t.canvasStyleData),{},{scale:t.scale}))}),1e3)},lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},compose:function(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose:function(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo:function(){this.$store.commit("undo")},redo:function(){this.$store.commit("redo")},handleFileChange:function(t){var e=this,n=t.target.files[0];if(n.type.includes("image")){var o=new FileReader;o.onload=function(t){var n=t.target.result,o=new Image;o.onload=function(){e.$store.commit("addComponent",{component:Object(h["a"])(Object(h["a"])({},ht["a"]),{},{id:Object(ge["a"])(),component:"Picture",label:"图片",icon:"",propValue:{url:n,flip:{horizontal:!1,vertical:!1}},style:Object(h["a"])(Object(h["a"])({},ht["b"]),{},{top:0,left:0,width:o.width,height:o.height})})}),e.$store.commit("recordSnapshot"),Object(_["a"])("#input").setAttribute("type","text"),Object(_["a"])("#input").setAttribute("type","file")},o.src=n},o.readAsDataURL(n)}else Object(ye["a"])("只能插入图片")},preview:function(t){this.isScreenshot=t,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save:function(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas:function(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange:function(){this.$store.commit("setEditMode","edit")}}},Kn=Jn,Qn=(n("e2b7"),Object(D["a"])(Kn,ve,be,!1,null,"4e0a477d",null)),Zn=Qn.exports,to=n("2c7d"),eo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"real-time-component-list"},t._l(t.componentData,(function(e,o){return n("div",{key:o,staticClass:"list",class:{actived:t.transformIndex(o)===t.curComponentIndex},on:{click:function(e){t.onClick(t.transformIndex(o))}}},[n("span",{staticClass:"iconfont",class:"icon-"+t.getComponent(o).icon}),n("span",[t._v(t._s(t.getComponent(o).label))]),n("div",{staticClass:"icon-container"},[n("span",{staticClass:"iconfont icon-shangyi",on:{click:function(e){t.upComponent(t.transformIndex(o))}}}),n("span",{staticClass:"iconfont icon-xiayi",on:{click:function(e){t.downComponent(t.transformIndex(o))}}}),n("span",{staticClass:"iconfont icon-shanchu",on:{click:function(e){t.deleteComponent(t.transformIndex(o))}}})])])})),0)},no=[],oo={computed:Object(c["b"])(["componentData","curComponent","curComponentIndex"]),methods:{getComponent:function(t){return this.componentData[this.componentData.length-1-t]},transformIndex:function(t){return this.componentData.length-1-t},onClick:function(t){this.setCurComponent(t)},deleteComponent:function(){var t=this;setTimeout((function(){t.$store.commit("deleteComponent"),t.$store.commit("recordSnapshot")}))},upComponent:function(){var t=this;setTimeout((function(){t.$store.commit("upComponent"),t.$store.commit("recordSnapshot")}))},downComponent:function(){var t=this;setTimeout((function(){t.$store.commit("downComponent"),t.$store.commit("recordSnapshot")}))},setCurComponent:function(t){this.$store.commit("setCurComponent",{component:this.componentData[t],index:t})}}},io=oo,ao=(n("0061"),Object(D["a"])(io,eo,no,!1,null,"7168ee16",null)),ro=ao.exports,co=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attr-container"},[n("p",{staticClass:"title"},[t._v("画布属性")]),n("el-form",{staticStyle:{padding:"20px"}},t._l(Object.keys(t.options),(function(e,o){return n("el-form-item",{key:o,attrs:{label:t.options[e]}},[t.isIncludesColor(e)?n("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.canvasStyleData[e],callback:function(n){t.$set(t.canvasStyleData,e,n)},expression:"canvasStyleData[key]"}}):n("el-input",{attrs:{type:"number"},model:{value:t.canvasStyleData[e],callback:function(n){t.$set(t.canvasStyleData,e,t._n(n))},expression:"canvasStyleData[key]"}})],1)})),1)],1)},so=[],lo={data:function(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:Object(c["b"])(["canvasStyleData"]),methods:{isIncludesColor:function(t){return t.toLowerCase().includes("color")}}},uo=lo,ho=(n("2187"),Object(D["a"])(uo,co,so,!1,null,null,null)),fo=ho.exports,mo={components:{Editor:st,ComponentList:pt,AnimationList:It,EventList:pe,Toolbar:Zn,RealTimeComponentList:ro,CanvasAttr:fo},data:function(){return{activeName:"attr",reSelectAnimateIndex:void 0}},computed:Object(c["b"])(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created:function(){this.restore(),Object(to["b"])()},methods:{restore:function(){localStorage.getItem("canvasData")&&this.$store.commit("setComponentData",this.resetID(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},resetID:function(t){var e=this;return t.forEach((function(t){t.id=Object(ge["a"])(),"Group"===t.component&&e.resetID(t.propValue)})),t},handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(e){var o=Object(_["b"])(ht["c"][e]);o.style.top=t.clientY-n.y,o.style.left=t.clientX-n.x,o.id=Object(ge["a"])(),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown:function(t){t.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent:function(t){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=t.button&&this.$store.commit("hideContextMenu")}}},po=mo,vo=(n("3aac"),Object(D["a"])(po,o,i,!1,null,"57414f08",null));e["default"]=vo.exports},c4e4:function(t,e,n){"use strict";n("1bc6")},c87d:function(t,e,n){},c987:function(t,e,n){},d784:function(t,e,n){"use strict";n("ac1f");var o=n("e330"),i=n("6eeb"),a=n("9263"),r=n("d039"),c=n("b622"),s=n("9112"),l=c("species"),u=RegExp.prototype;t.exports=function(t,e,n,h){var f=c(t),m=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=m&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!m||!d||n){var p=o(/./[f]),v=e(f,""[t],(function(t,e,n,i,r){var c=o(t),s=e.exec;return s===a||s===u.exec?m&&!r?{done:!0,value:p(e,n,i)}:{done:!0,value:c(n,e,i)}:{done:!1}}));i(String.prototype,t,v[0]),i(u,f,v[1])}h&&s(u[f],"sham",!0)}},e285:function(t,e,n){"use strict";n("ee2e")},e2b7:function(t,e,n){"use strict";n("84cc")},e9c4:function(t,e,n){var o=n("23e7"),i=n("da84"),a=n("d066"),r=n("2ba4"),c=n("e330"),s=n("d039"),l=i.Array,u=a("JSON","stringify"),h=c(/./.exec),f=c("".charAt),m=c("".charCodeAt),d=c("".replace),p=c(1..toString),v=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,y=function(t,e,n){var o=f(n,e-1),i=f(n,e+1);return h(b,t)&&!h(g,i)||h(g,t)&&!h(b,o)?"\\u"+p(m(t,0),16):t},w=s((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&o({target:"JSON",stat:!0,forced:w},{stringify:function(t,e,n){for(var o=0,i=arguments.length,a=l(i);o<i;o++)a[o]=arguments[o];var c=r(u,null,a);return"string"==typeof c?d(c,v,y):c}})},ee2e:function(t,e,n){},fd09:function(t,e,n){}}]);
//# sourceMappingURL=chunk-55d91fcb.78ce37b8.js.map