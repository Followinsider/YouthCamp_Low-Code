(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7db70eea"],{2423:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"edit"==t.editMode?n("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[n("el-link",{ref:"text",class:{canEdit:t.canEdit},style:{verticalAlign:t.element.style.verticalAlign},attrs:{type:"primary",contenteditable:t.canEdit,tabindex:t.element.id},domProps:{innerHTML:t._s(t.element.propValue.text)},on:{dblclick:t.setEdit,paste:t.clearStyle,mousedown:t.handleMousedown,blur:t.handleBlur,input:t.handleInput,click:t.openLink}})],1):n("div",{staticClass:"v-text preview"},[n("el-link",{style:{verticalAlign:t.element.style.verticalAlign},attrs:{type:"primary"},domProps:{innerHTML:t._s(t.element.propValue.text)},on:{click:t.openLink}})],1)},o=[],a=n("5530"),c=(n("9911"),n("caad"),n("2532"),n("2f62")),l=n("2c7d"),r=n("728d"),s={extends:r["a"],props:{propValue:{type:Object,require:!0,default:function(){}},element:{type:Object,default:function(){}}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(a["a"])({},Object(c["b"])(["editMode"])),methods:{openLink:function(){window.open(this.element.propValue.link)},handleInput:function(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&l["a"].includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(t){this.canEdit&&t.stopPropagation()},clearStyle:function(t){t.preventDefault();var e=t.clipboardData,n=e.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,t.target.innerHTML)},handleBlur:function(t){var e=this;this.element.propValue.text=t.target.innerHTML||"&nbsp;";var n=t.target.innerHTML;""!==n?this.element.propValue.text=t.target.innerHTML:(this.element.propValue.text="",this.$nextTick((function(){e.element.propValue.text="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(t){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},u=s,d=(n("da62"),n("2877")),p=Object(d["a"])(u,i,o,!1,null,"604c053c",null);e["default"]=p.exports},"2c7d":function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return M}));var i,o,a=n("5530"),c=n("ade3"),l=n("4360"),r=n("986e"),s=17,u=91,d=86,p=67,f=88,m=89,h=90,v=71,k=66,b=76,y=85,g=83,w=80,j=68,O=46,C=8,x=69,E=[66,67,68,69,71,76,80,83,85,86,88,89,90],L=(i={},Object(c["a"])(i,d,H),Object(c["a"])(i,m,K),Object(c["a"])(i,h,P),Object(c["a"])(i,g,_),Object(c["a"])(i,w,R),Object(c["a"])(i,x,B),i),$=Object(a["a"])(Object(a["a"])({},L),{},Object(c["a"])({},y,G)),D=Object(a["a"])(Object(a["a"])({},L),{},(o={},Object(c["a"])(o,p,T),Object(c["a"])(o,f,V),Object(c["a"])(o,v,A),Object(c["a"])(o,k,I),Object(c["a"])(o,j,q),Object(c["a"])(o,O,q),Object(c["a"])(o,C,q),Object(c["a"])(o,b,J),o)),S=!1;function M(){window.onkeydown=function(t){if(l["a"].state.isInEdiotr){var e=l["a"].state.curComponent,n=t.keyCode;n===s||n===u?S=!0:n==O||n==C&&e?(l["a"].commit("deleteComponent"),l["a"].commit("recordSnapshot")):S&&(!D[n]||e&&e.isLock?$[n]&&e&&e.isLock&&(t.preventDefault(),$[n]()):(t.preventDefault(),D[n]()))}},window.onkeyup=function(t){t.keyCode!==s&&t.keyCode!==u||(S=!1)},window.onmousedown=function(){l["a"].commit("setInEditorStatus",!1)}}function T(){l["a"].commit("copy")}function H(){l["a"].commit("paste"),l["a"].commit("recordSnapshot")}function V(){l["a"].commit("cut")}function K(){l["a"].commit("redo")}function P(){l["a"].commit("undo")}function A(){l["a"].state.areaData.components.length&&(l["a"].commit("compose"),l["a"].commit("recordSnapshot"))}function I(){var t=l["a"].state.curComponent;t&&!t.isLock&&"Group"==t.component&&(l["a"].commit("decompose"),l["a"].commit("recordSnapshot"))}function _(){r["a"].$emit("save")}function R(){r["a"].$emit("preview")}function q(){l["a"].state.curComponent&&(l["a"].commit("deleteComponent"),l["a"].commit("recordSnapshot"))}function B(){r["a"].$emit("clearCanvas")}function J(){l["a"].commit("lock")}function G(){l["a"].commit("unlock")}},"728d":function(t,e,n){"use strict";n("4160"),n("d3b7"),n("159b"),n("4de4");var i,o,a=n("986e"),c={props:{linkage:{type:Object,default:function(){}},element:{type:Object,default:function(){}}},created:function(){var t,e;null!==(t=this.linkage)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length&&(a["a"].$on("v-click",this.onClick),a["a"].$on("v-hover",this.onHover),a["a"].$on("v-dblclick",this.onDblclick))},mounted:function(){var t=this.linkage||{},e=t.data,n=t.duration;null!==e&&void 0!==e&&e.length&&(this.$el.style.transition="all ".concat(n,"s"))},beforeDestroy:function(){var t,e;null!==(t=this.linkage)&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length&&(a["a"].$off("v-click",this.onClick),a["a"].$off("v-hover",this.onHover),a["a"].$on("v-dblclick",this.onDblclick))},methods:{changeStyle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){e.style.forEach((function(e){e.key&&(t.element.style[e.key]=e.value)}))}))},onClick:function(t){var e=this.linkage.data.filter((function(e){return e.id===t&&"v-click"===e.event}));this.changeStyle(e)},onDblclick:function(t){var e=this.linkage.data.filter((function(e){return e.id===t&&"v-dblclick"===e.event}));console.log("v-dblclick"),this.changeStyle(e)},onHover:function(t){var e=this.linkage.data.filter((function(e){return e.id===t&&"v-hover"===e.event}));this.changeStyle(e)}}},l=c,r=n("2877"),s=Object(r["a"])(l,i,o,!1,null,null,null);e["a"]=s.exports},"857a":function(t,e,n){var i=n("e330"),o=n("1d80"),a=n("577e"),c=/"/g,l=i("".replace);t.exports=function(t,e,n,i){var r=a(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+l(a(i),c,"&quot;")+'"'),s+">"+r+"</"+e+">"}},9911:function(t,e,n){"use strict";var i=n("23e7"),o=n("857a"),a=n("af03");i({target:"String",proto:!0,forced:a("link")},{link:function(t){return o(this,"a","href",t)}})},abf7:function(t,e,n){},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},da62:function(t,e,n){"use strict";n("abf7")}}]);
//# sourceMappingURL=chunk-7db70eea.590e5b80.js.map