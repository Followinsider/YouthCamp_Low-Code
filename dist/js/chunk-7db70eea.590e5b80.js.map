{"version":3,"sources":["webpack:///./src/custom-component/VLink/Component.vue?0921","webpack:///src/custom-component/VLink/E:/Front-End/Github_DB/visual-drag-demo/src/custom-component/VLink/Component.vue","webpack:///./src/custom-component/VLink/Component.vue?92d8","webpack:///./src/custom-component/VLink/Component.vue","webpack:///./src/utils/shortcutKey.js","webpack:///./src/custom-component/common/OnEvent.vue","webpack:///src/custom-component/common/E:/Front-End/Github_DB/visual-drag-demo/src/custom-component/common/OnEvent.vue","webpack:///./src/custom-component/common/OnEvent.vue?e874","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/custom-component/VLink/Component.vue?5e58"],"names":["render","_vm","this","_h","$createElement","_c","_self","editMode","staticClass","on","handleKeydown","handleKeyup","ref","class","canEdit","style","verticalAlign","element","attrs","id","domProps","_s","propValue","text","setEdit","clearStyle","handleMousedown","handleBlur","handleInput","openLink","staticRenderFns","extends","OnEvent","props","type","Object","require","default","data","ctrlKey","isCtrlDown","computed","mapState","methods","window","open","link","e","$emit","target","innerHTML","stopPropagation","keyCode","keycodes","includes","preventDefault","clp","clipboardData","getData","document","execCommand","html","$nextTick","isLock","selectText","$refs","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","component","commandKey","vKey","cKey","xKey","yKey","zKey","gKey","bKey","lKey","uKey","sKey","pKey","dKey","deleteKey","backspaceKey","eKey","basemap","paste","redo","undo","save","preview","clearCanvas","lockMap","unlock","unlockMap","copy","cut","compose","decompose","deleteComponent","lock","isCtrlOrCommandDown","listenGlobalKeyDown","onkeydown","store","state","isInEdiotr","curComponent","commit","onkeyup","onmousedown","areaData","components","length","eventBus","linkage","created","$on","onClick","onHover","onDblclick","mounted","duration","$el","transition","beforeDestroy","$off","changeStyle","forEach","item","key","value","componentId","filter","event","console","log","uncurryThis","requireObjectCoercible","toString","quot","replace","module","exports","string","tag","attribute","S","p1","$","createHTML","forcedStringHTMLMethod","proto","forced","url","fails","METHOD_NAME","test","toLowerCase","split"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,MAAwB,QAAhBF,EAAIM,SAAoBF,EAAG,MAAM,CAACG,YAAY,SAASC,GAAG,CAAC,QAAUR,EAAIS,cAAc,MAAQT,EAAIU,cAAc,CAACN,EAAG,UAAU,CAACO,IAAI,OAAOC,MAAM,CAAEC,QAASb,EAAIa,SAAUC,MAAM,CAAGC,cAAef,EAAIgB,QAAQF,MAAMC,eAAiBE,MAAM,CAAC,KAAO,UAAU,gBAAkBjB,EAAIa,QAAQ,SAAWb,EAAIgB,QAAQE,IAAIC,SAAS,CAAC,UAAYnB,EAAIoB,GAAGpB,EAAIgB,QAAQK,UAAUC,OAAOd,GAAG,CAAC,SAAWR,EAAIuB,QAAQ,MAAQvB,EAAIwB,WAAW,UAAYxB,EAAIyB,gBAAgB,KAAOzB,EAAI0B,WAAW,MAAQ1B,EAAI2B,YAAY,MAAQ3B,EAAI4B,aAAa,GAAGxB,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,UAAU,CAACU,MAAM,CAAGC,cAAef,EAAIgB,QAAQF,MAAMC,eAAiBE,MAAM,CAAC,KAAO,WAAWE,SAAS,CAAC,UAAYnB,EAAIoB,GAAGpB,EAAIgB,QAAQK,UAAUC,OAAOd,GAAG,CAAC,MAAQR,EAAI4B,aAAa,IAC30BC,EAAkB,G,gFCuCP,GACXC,QAASC,OACTC,MAAO,CACHX,UAAW,CACPY,KAAMC,OACNC,SAAS,EACTC,QAAS,cAEbpB,QAAS,CACLiB,KAAMC,OACNE,QAAS,eAGjBC,KAbW,WAcP,MAAO,CACHxB,SAAS,EACTyB,QAAS,GACTC,YAAY,IAGpBC,SAAU,kBACHC,eAAS,CACR,cAGRC,QAAS,CACLd,SADK,WAEDe,OAAOC,KAAK3C,KAAKe,QAAQK,UAAUwB,OAGvClB,YALK,SAKOmB,GACR7C,KAAK8C,MAAM,QAAS9C,KAAKe,QAAS8B,EAAEE,OAAOC,YAG/CxC,cATK,SASSqC,GAEV7C,KAAKY,SAAWiC,EAAEI,kBACdJ,EAAEK,SAAWlD,KAAKqC,QAClBrC,KAAKsC,YAAa,GACXtC,KAAKsC,YAActC,KAAKY,SAAWuC,OAASC,SAASP,EAAEK,UAE1C,IAAbL,EAAEK,UADTL,EAAEI,mBAMVxC,YArBK,SAqBOoC,GAER7C,KAAKY,SAAWiC,EAAEI,kBACdJ,EAAEK,SAAWlD,KAAKqC,UAClBrC,KAAKsC,YAAa,IAI1Bd,gBA7BK,SA6BWqB,GAGR7C,KAAKY,SACLiC,EAAEI,mBAIV1B,WArCK,SAqCMsB,GACPA,EAAEQ,iBACF,IAAMC,EAAMT,EAAEU,cAERlC,EAAOiC,EAAIE,QAAQ,eAAiB,GAC7B,KAATnC,GACAoC,SAASC,YAAY,cAAc,EAAOrC,GAG9CrB,KAAK8C,MAAM,QAAS9C,KAAKe,QAAS8B,EAAEE,OAAOC,YAG/CvB,WAjDK,SAiDMoB,GAAG,WACV7C,KAAKe,QAAQK,UAAUC,KAAOwB,EAAEE,OAAOC,WAAa,SACpD,IAAMW,EAAOd,EAAEE,OAAOC,UACT,KAATW,EACA3D,KAAKe,QAAQK,UAAUC,KAAOwB,EAAEE,OAAOC,WAEvChD,KAAKe,QAAQK,UAAUC,KAAO,GAC9BrB,KAAK4D,WAAU,WACX,EAAK7C,QAAQK,UAAUC,KAAO,aAGtCrB,KAAKY,SAAU,GAGnBU,QA/DK,WAgEGtB,KAAKe,QAAQ8C,SAEjB7D,KAAKY,SAAU,EAGfZ,KAAK8D,WAAW9D,KAAK+D,MAAM1C,QAI/ByC,WAzEK,SAyEM/C,GAEP,IAAMiD,EAAYtB,OAAOuB,eACnBC,EAAQT,SAASU,cAGvBD,EAAME,mBAAmBrD,GAGzBiD,EAAUK,kBACVL,EAAUM,SAASJ,MCpJmU,I,wBCQ9VK,EAAY,eACd,EACAzE,EACA8B,GACA,EACA,KACA,WACA,MAIa,aAAA2C,E,yKChBTlC,EAAU,GACZmC,EAAa,GACbC,EAAO,GACPC,EAAO,GACPC,EAAO,GAEPC,EAAO,GACPC,EAAO,GAEPC,EAAO,GACPC,EAAO,GAEPC,EAAO,GACPC,EAAO,GAEPC,EAAO,GACPC,EAAO,GACPC,EAAO,GACPC,EAAY,GACZC,EAAe,EACfC,EAAO,GAEEpC,EAAW,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGnEqC,GAAO,sBACRf,EAAOgB,GADC,iBAERb,EAAOc,GAFC,iBAGRb,EAAOc,GAHC,iBAIRT,EAAOU,GAJC,iBAKRT,EAAOU,GALC,iBAMRN,EAAOO,GANC,GAUPC,EAAU,iCACTP,GADM,qBAERP,EAAOe,IAINC,EAAY,iCACXT,GADQ,0BAEVd,EAAOwB,GAFG,iBAGVvB,EAAOwB,GAHG,iBAIVrB,EAAOsB,GAJG,iBAKVrB,EAAOsB,GALG,iBAMVjB,EAAOkB,GANG,iBAOVjB,EAAYiB,GAPF,iBAQVhB,EAAegB,GARL,iBASVtB,EAAOuB,GATG,IAYXC,GAAsB,EAEnB,SAASC,IACZ/D,OAAOgE,UAAY,SAAC7D,GAChB,GAAK8D,OAAMC,MAAMC,WAAjB,CAEA,IAAQC,EAAiBH,OAAMC,MAAvBE,aACA5D,EAAYL,EAAZK,QACJA,IAAYb,GAAWa,IAAYsB,EACnCgC,GAAsB,EACftD,GAAWmC,GAAanC,GAAWoC,GAAgBwB,GAC1DH,OAAMI,OAAO,mBACbJ,OAAMI,OAAO,mBACNP,KACHP,EAAU/C,IAAc4D,GAAiBA,EAAajD,OAG/CkC,EAAQ7C,IAAY4D,GAAgBA,EAAajD,SACxDhB,EAAEQ,iBACF0C,EAAQ7C,OAJRL,EAAEQ,iBACF4C,EAAU/C,SAQtBR,OAAOsE,QAAU,SAACnE,GACVA,EAAEK,UAAYb,GAAWQ,EAAEK,UAAYsB,IACvCgC,GAAsB,IAI9B9D,OAAOuE,YAAc,WACjBN,OAAMI,OAAO,qBAAqB,IAI1C,SAASb,IACLS,OAAMI,OAAO,QAGjB,SAAStB,IACLkB,OAAMI,OAAO,SACbJ,OAAMI,OAAO,kBAGjB,SAASZ,IACLQ,OAAMI,OAAO,OAGjB,SAASrB,IACLiB,OAAMI,OAAO,QAGjB,SAASpB,IACLgB,OAAMI,OAAO,QAGjB,SAASX,IACDO,OAAMC,MAAMM,SAASC,WAAWC,SAChCT,OAAMI,OAAO,WACbJ,OAAMI,OAAO,mBAIrB,SAASV,IACL,IAAMS,EAAeH,OAAMC,MAAME,aAC7BA,IAAiBA,EAAajD,QAAoC,SAA1BiD,EAAavC,YACrDoC,OAAMI,OAAO,aACbJ,OAAMI,OAAO,mBAIrB,SAASnB,IACLyB,OAASvE,MAAM,QAGnB,SAAS+C,IACLwB,OAASvE,MAAM,WAGnB,SAASwD,IACDK,OAAMC,MAAME,eACZH,OAAMI,OAAO,mBACbJ,OAAMI,OAAO,mBAIrB,SAASjB,IACLuB,OAASvE,MAAM,eAGnB,SAASyD,IACLI,OAAMI,OAAO,QAGjB,SAASf,IACLW,OAAMI,OAAO,Y,gFCvJbjH,EAAQ8B,E,YCGG,GACXG,MAAO,CACHuF,QAAS,CACLtF,KAAMC,OACNE,QAAS,cAEbpB,QAAS,CACLiB,KAAMC,OACNE,QAAS,eAGjBoF,QAXW,WAWD,QACN,UAAIvH,KAAKsH,eAAT,iBAAI,EAAclF,YAAlB,OAAI,EAAoBgF,SACpBC,OAASG,IAAI,UAAWxH,KAAKyH,SAC7BJ,OAASG,IAAI,UAAWxH,KAAK0H,SAC7BL,OAASG,IAAI,aAAcxH,KAAK2H,cAGxCC,QAlBW,WAmBP,MAA2B5H,KAAKsH,SAAW,GAAnClF,EAAR,EAAQA,KAAMyF,EAAd,EAAcA,SACd,OAAIzF,QAAJ,IAAIA,KAAMgF,SACNpH,KAAK8H,IAAIjH,MAAMkH,WAAf,cAAmCF,EAAnC,OAGRG,cAxBW,WAwBK,QACZ,UAAIhI,KAAKsH,eAAT,iBAAI,EAAclF,YAAlB,OAAI,EAAoBgF,SACpBC,OAASY,KAAK,UAAWjI,KAAKyH,SAC9BJ,OAASY,KAAK,UAAWjI,KAAK0H,SAC9BL,OAASG,IAAI,aAAcxH,KAAK2H,cAGxClF,QAAS,CACLyF,YADK,WACkB,WAAX9F,EAAW,uDAAJ,GACfA,EAAK+F,SAAQ,SAAAC,GACTA,EAAKvH,MAAMsH,SAAQ,SAAAtF,GACXA,EAAEwF,MACF,EAAKtH,QAAQF,MAAMgC,EAAEwF,KAAOxF,EAAEyF,cAM9Cb,QAXK,SAWGc,GACJ,IAAMnG,EAAOpC,KAAKsH,QAAQlF,KAAKoG,QAAO,SAAAJ,GAAI,OAAIA,EAAKnH,KAAOsH,GAA8B,YAAfH,EAAKK,SAC9EzI,KAAKkI,YAAY9F,IAGrBuF,WAhBK,SAgBMY,GACP,IAAMnG,EAAOpC,KAAKsH,QAAQlF,KAAKoG,QAAO,SAAAJ,GAAI,OAAIA,EAAKnH,KAAOsH,GAA8B,eAAfH,EAAKK,SAC9EC,QAAQC,IAAI,cACZ3I,KAAKkI,YAAY9F,IAGrBsF,QAtBK,SAsBGa,GACJ,IAAMnG,EAAOpC,KAAKsH,QAAQlF,KAAKoG,QAAO,SAAAJ,GAAI,OAAIA,EAAKnH,KAAOsH,GAA8B,YAAfH,EAAKK,SAC9EzI,KAAKkI,YAAY9F,MC1DmU,I,YFO5VmC,EAAY,eACd,EACAzE,EACA8B,GACA,EACA,KACA,KACA,MAIa,OAAA2C,E,gCGlBf,IAAIqE,EAAc,EAAQ,QACtBC,EAAyB,EAAQ,QACjCC,EAAW,EAAQ,QAEnBC,EAAO,KACPC,EAAUJ,EAAY,GAAGI,SAI7BC,EAAOC,QAAU,SAAUC,EAAQC,EAAKC,EAAWf,GACjD,IAAIgB,EAAIR,EAASD,EAAuBM,IACpCI,EAAK,IAAMH,EAEf,MADkB,KAAdC,IAAkBE,GAAM,IAAMF,EAAY,KAAOL,EAAQF,EAASR,GAAQS,EAAM,UAAY,KACzFQ,EAAK,IAAMD,EAAI,KAAOF,EAAM,M,kCCZrC,IAAII,EAAI,EAAQ,QACZC,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QAIrCF,EAAE,CAAEzG,OAAQ,SAAU4G,OAAO,EAAMC,OAAQF,EAAuB,SAAW,CAC3E9G,KAAM,SAAciH,GAClB,OAAOJ,EAAWzJ,KAAM,IAAK,OAAQ6J,O,4CCTzC,IAAIC,EAAQ,EAAQ,QAIpBb,EAAOC,QAAU,SAAUa,GACzB,OAAOD,GAAM,WACX,IAAIE,EAAO,GAAGD,GAAa,KAC3B,OAAOC,IAASA,EAAKC,eAAiBD,EAAKE,MAAM,KAAK9C,OAAS,O,kCCPnE","file":"js/chunk-7db70eea.590e5b80.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.editMode == 'edit')?_c('div',{staticClass:\"v-text\",on:{\"keydown\":_vm.handleKeydown,\"keyup\":_vm.handleKeyup}},[_c('el-link',{ref:\"text\",class:{ canEdit: _vm.canEdit },style:({ verticalAlign: _vm.element.style.verticalAlign }),attrs:{\"type\":\"primary\",\"contenteditable\":_vm.canEdit,\"tabindex\":_vm.element.id},domProps:{\"innerHTML\":_vm._s(_vm.element.propValue.text)},on:{\"dblclick\":_vm.setEdit,\"paste\":_vm.clearStyle,\"mousedown\":_vm.handleMousedown,\"blur\":_vm.handleBlur,\"input\":_vm.handleInput,\"click\":_vm.openLink}})],1):_c('div',{staticClass:\"v-text preview\"},[_c('el-link',{style:({ verticalAlign: _vm.element.style.verticalAlign }),attrs:{\"type\":\"primary\"},domProps:{\"innerHTML\":_vm._s(_vm.element.propValue.text)},on:{\"click\":_vm.openLink}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState } from 'vuex'\r\nimport { keycodes } from '@/utils/shortcutKey.js'\r\nimport OnEvent from '../common/OnEvent'\r\n\r\nexport default {\r\n    extends: OnEvent,\r\n    props: {\r\n        propValue: {\r\n            type: Object,\r\n            require: true,\r\n            default: () => {},\r\n        },\r\n        element: {\r\n            type: Object,\r\n            default: () => {},\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            canEdit: false,\r\n            ctrlKey: 17,\r\n            isCtrlDown: false,\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState([\r\n            'editMode',\r\n        ]),\r\n    },\r\n    methods: {\r\n        openLink() {\r\n            window.open(this.element.propValue.link)\r\n        },\r\n\r\n        handleInput(e) {\r\n            this.$emit('input', this.element, e.target.innerHTML)\r\n        },\r\n\r\n        handleKeydown(e) {\r\n            // 阻止冒泡，防止触发复制、粘贴组件操作\r\n            this.canEdit && e.stopPropagation()\r\n            if (e.keyCode == this.ctrlKey) {\r\n                this.isCtrlDown = true\r\n            } else if (this.isCtrlDown && this.canEdit && keycodes.includes(e.keyCode)) {\r\n                e.stopPropagation()\r\n            } else if (e.keyCode == 46) { // deleteKey\r\n                e.stopPropagation()\r\n            }\r\n        },\r\n\r\n        handleKeyup(e) {\r\n            // 阻止冒泡，防止触发复制、粘贴组件操作\r\n            this.canEdit && e.stopPropagation()\r\n            if (e.keyCode == this.ctrlKey) {\r\n                this.isCtrlDown = false\r\n            }\r\n        },\r\n\r\n        handleMousedown(e) {\r\n            // return;\r\n            // 如果可以编辑取消拖动默认事件\r\n            if (this.canEdit) {\r\n                e.stopPropagation()\r\n            }\r\n        },\r\n\r\n        clearStyle(e) {\r\n            e.preventDefault()\r\n            const clp = e.clipboardData\r\n            // 获取刚刚复制好的文本\r\n            const text = clp.getData('text/plain') || ''\r\n            if (text !== '') {\r\n                document.execCommand('insertText', false, text)\r\n            }\r\n\r\n            this.$emit('input', this.element, e.target.innerHTML)\r\n        },\r\n\r\n        handleBlur(e) {\r\n            this.element.propValue.text = e.target.innerHTML || '&nbsp;'\r\n            const html = e.target.innerHTML\r\n            if (html !== '') {\r\n                this.element.propValue.text = e.target.innerHTML\r\n            } else {\r\n                this.element.propValue.text = ''\r\n                this.$nextTick(() => {\r\n                    this.element.propValue.text = '&nbsp;'\r\n                })\r\n            }\r\n            this.canEdit = false\r\n        },\r\n\r\n        setEdit() {\r\n            if (this.element.isLock) return\r\n\r\n            this.canEdit = true\r\n            // 全选\r\n            // 通过ref取得整个DOM div\r\n            this.selectText(this.$refs.text)  \r\n        },\r\n\r\n        // 双击让光标获取整个句子\r\n        selectText(element) {\r\n            // selection 是获取光标中的字段\r\n            const selection = window.getSelection()\r\n            const range = document.createRange()\r\n\r\n            // 用range可以获取到光标字段的内容，参数为选取的DOM对象中的文本\r\n            range.selectNodeContents(element)\r\n\r\n            // 清除掉刚刚selection中的字段，在把range获取到的文本加进来\r\n            selection.removeAllRanges()\r\n            selection.addRange(range)\r\n        },\r\n    },\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Component.vue?vue&type=template&id=604c053c&scoped=true&\"\nimport script from \"./Component.vue?vue&type=script&lang=js&\"\nexport * from \"./Component.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Component.vue?vue&type=style&index=0&id=604c053c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"604c053c\",\n  null\n  \n)\n\nexport default component.exports","import store from '@/store'\r\nimport eventBus from '@/utils/eventBus'\r\n\r\nconst ctrlKey = 17,\r\n    commandKey = 91, // mac command\r\n    vKey = 86, // 粘贴\r\n    cKey = 67, // 复制\r\n    xKey = 88, // 剪切\r\n\r\n    yKey = 89, // 重做\r\n    zKey = 90, // 撤销\r\n\r\n    gKey = 71, // 组合\r\n    bKey = 66, // 拆分\r\n\r\n    lKey = 76, // 锁定\r\n    uKey = 85, // 解锁\r\n\r\n    sKey = 83, // 保存\r\n    pKey = 80, // 预览\r\n    dKey = 68, // 删除\r\n    deleteKey = 46, // 删除\r\n    backspaceKey = 8, // 删除\r\n    eKey = 69 // 清空画布\r\n\r\nexport const keycodes = [66, 67, 68, 69, 71, 76, 80, 83, 85, 86, 88, 89, 90]\r\n\r\n// 与组件状态无关的操作\r\nconst basemap = {\r\n    [vKey]: paste,\r\n    [yKey]: redo,\r\n    [zKey]: undo,\r\n    [sKey]: save,\r\n    [pKey]: preview,\r\n    [eKey]: clearCanvas,\r\n}\r\n\r\n// 组件锁定状态下可以执行的操作\r\nconst lockMap = {\r\n    ...basemap,\r\n    [uKey]: unlock,\r\n}\r\n\r\n// 组件未锁定状态下可以执行的操作\r\nconst unlockMap = {\r\n    ...basemap,\r\n    [cKey]: copy,\r\n    [xKey]: cut,\r\n    [gKey]: compose,\r\n    [bKey]: decompose,\r\n    [dKey]: deleteComponent,\r\n    [deleteKey]: deleteComponent,\r\n    [backspaceKey]: deleteComponent,\r\n    [lKey]: lock,\r\n}\r\n\r\nlet isCtrlOrCommandDown = false\r\n// 全局监听按键操作并执行相应命令\r\nexport function listenGlobalKeyDown() {\r\n    window.onkeydown = (e) => {\r\n        if (!store.state.isInEdiotr) return\r\n\r\n        const { curComponent } = store.state\r\n        const { keyCode } = e\r\n        if (keyCode === ctrlKey || keyCode === commandKey) {\r\n            isCtrlOrCommandDown = true\r\n        } else if (keyCode == deleteKey || keyCode == backspaceKey && curComponent) {\r\n            store.commit('deleteComponent')\r\n            store.commit('recordSnapshot')\r\n        } else if (isCtrlOrCommandDown) {\r\n            if (unlockMap[keyCode] && (!curComponent || !curComponent.isLock)) {\r\n                e.preventDefault()\r\n                unlockMap[keyCode]()\r\n            } else if (lockMap[keyCode] && curComponent && curComponent.isLock) {\r\n                e.preventDefault()\r\n                lockMap[keyCode]()\r\n            }\r\n        }\r\n    }\r\n\r\n    window.onkeyup = (e) => {\r\n        if (e.keyCode === ctrlKey || e.keyCode === commandKey) {\r\n            isCtrlOrCommandDown = false\r\n        }\r\n    }\r\n\r\n    window.onmousedown = () => {\r\n        store.commit('setInEditorStatus', false)\r\n    }\r\n}\r\n\r\nfunction copy() {\r\n    store.commit('copy')\r\n}\r\n\r\nfunction paste() {\r\n    store.commit('paste')\r\n    store.commit('recordSnapshot')\r\n}\r\n\r\nfunction cut() {\r\n    store.commit('cut')\r\n}\r\n\r\nfunction redo() {\r\n    store.commit('redo')\r\n}\r\n\r\nfunction undo() {\r\n    store.commit('undo')\r\n}\r\n\r\nfunction compose() {\r\n    if (store.state.areaData.components.length) {\r\n        store.commit('compose')\r\n        store.commit('recordSnapshot')\r\n    }\r\n}\r\n\r\nfunction decompose() {\r\n    const curComponent = store.state.curComponent\r\n    if (curComponent && !curComponent.isLock && curComponent.component == 'Group') {\r\n        store.commit('decompose')\r\n        store.commit('recordSnapshot')\r\n    }\r\n}\r\n\r\nfunction save() {\r\n    eventBus.$emit('save')\r\n}\r\n\r\nfunction preview() {\r\n    eventBus.$emit('preview')\r\n}\r\n\r\nfunction deleteComponent() {\r\n    if (store.state.curComponent) {\r\n        store.commit('deleteComponent')\r\n        store.commit('recordSnapshot')\r\n    }\r\n}\r\n\r\nfunction clearCanvas() {\r\n    eventBus.$emit('clearCanvas')\r\n}\r\n\r\nfunction lock() {\r\n    store.commit('lock')\r\n}\r\n\r\nfunction unlock() {\r\n    store.commit('unlock')\r\n}\r\n","var render, staticRenderFns\nimport script from \"./OnEvent.vue?vue&type=script&lang=js&\"\nexport * from \"./OnEvent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\r\nimport eventBus from '@/utils/eventBus'\r\n\r\nexport default {\r\n    props: {\r\n        linkage: {\r\n            type: Object,\r\n            default: () => {},\r\n        },\r\n        element: {\r\n            type: Object,\r\n            default: () => {},\r\n        },\r\n    },\r\n    created() {\r\n        if (this.linkage?.data?.length) {\r\n            eventBus.$on('v-click', this.onClick)\r\n            eventBus.$on('v-hover', this.onHover)\r\n            eventBus.$on('v-dblclick', this.onDblclick)\r\n        }\r\n    },\r\n    mounted() {\r\n        const { data, duration } = this.linkage || {}\r\n        if (data?.length) {\r\n            this.$el.style.transition = `all ${duration}s`\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        if (this.linkage?.data?.length) {\r\n            eventBus.$off('v-click', this.onClick)\r\n            eventBus.$off('v-hover', this.onHover)\r\n            eventBus.$on('v-dblclick', this.onDblclick)\r\n        }\r\n    },\r\n    methods: {\r\n        changeStyle(data = []) {\r\n            data.forEach(item => {\r\n                item.style.forEach(e => {\r\n                    if (e.key) {\r\n                        this.element.style[e.key] = e.value\r\n                    }\r\n                })\r\n            })\r\n        },\r\n\r\n        onClick(componentId) {\r\n            const data = this.linkage.data.filter(item => item.id === componentId && item.event === 'v-click')\r\n            this.changeStyle(data)\r\n        },\r\n\r\n        onDblclick(componentId) {\r\n            const data = this.linkage.data.filter(item => item.id === componentId && item.event === 'v-dblclick')\r\n            console.log('v-dblclick')\r\n            this.changeStyle(data)\r\n        },\r\n\r\n        onHover(componentId) {\r\n            const data = this.linkage.data.filter(item => item.id === componentId && item.event === 'v-hover')\r\n            this.changeStyle(data)\r\n        },\r\n    },\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js&\"","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\nvar replace = uncurryThis(''.replace);\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + replace(toString(value), quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Component.vue?vue&type=style&index=0&id=604c053c&lang=scss&scoped=true&\""],"sourceRoot":""}